### Processing Bus Reliability Data

1. Import pandas, matplotlib.pyplot, and seaborn.

2. Download the MBTA Commuter Rail Bus _Rapid Transit Reliability dataset from https://mbta-massdot.opendata.arcgis.com/datasets/mbta-commuter-rail-bus-rapid-transit-reliability and import as csv. Call the dataframe `mbta`.

3. The `service_date` field contains a generic time stamp which we do not need. The data will be aggregated at the year level. Using to_datetime, add a new column `date` that contains only the year of the `service_date` field.

4. The MBTA has three categories of buses in this data. Key bus routes, other bus routes, and the Silver Line. Though categorized like other rapid transit lines (e.g. Red Line, Orange Line) which are trains, the Silver Line is a series of buses that have elements of bus rapid transit like dedicated bus lanes.
Subset the data into `key buses` - which should include all buses marked 'Key Route' and all Silver Line buses - and `not_key_buses` - which should include all buses marked 'Other Route'

5. The reliability indicator is generated by the MBTA by dividing the number of on time departures (represented in the data by `otp_numerator`) by the total number of departures (`otp_denominator`).
Group the each subset of routes in the same way: first by route ID, peak or offpeak indicator, then year.

6. Sum the grouped routes by `otp_numerator` and `otp_denominator`.

7. Calculate the reliability percentage in a new column in the dataframe (`pct_reliable`) by dividing the `otp_numerator` by the `otp_denominator` and multiplying by 100, then reset the index.

8. This analysis will look at the year 2018 as that is the most recent year for which bus ridership data is available. Subset the grouped data into just the year 2018.

9. Because this analysis is looking to suggest routes that can benefit from dedicated bus lanes, we will focus on peak reliability because most traffic congestion is likely to occur during peak hours.
Subset the 2018 data by `peak_offpeak_ind` and keep the peak records.

10. Sort by lowest reliability percentage and store the fifteen worst reliability lines in a separate dataframe. Add a column `route_indicator` of 'key' for key routes and 'not key' for the other routes.

11. Append the key bus route dataframe to the non-key bus routes and save the combined list as a `bad_buses` dataframe.

12. Export the combined dataset to a .csv called 'bad_buses.csv'
